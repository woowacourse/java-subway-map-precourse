## 🚀 기능 요구사항

### 초기 설정 
- [x] 프로그램 시작 시 역, 노선 등 필요한 정보를 미리 셋팅할 수 있다.

> 아래의 사전 등록 정보로 반드시 초기 설정을 하기
>
```
 1. 지하철역으로 교대역, 강남역, 역삼역, 남부터미널역, 양재역, 양재시민의숲역, 매봉역이 등록되어 있다.
 2. 지하철 노선으로 2호선, 3호선, 신분당선이 등록되어 있다.
 3. 노선에 역이 아래와 같이 등록되어 있다.(왼쪽 끝이 상행 종점)
   - 2호선: 교대역 - 강남역 - 역삼역
   - 3호선: 교대역 - 남부터미널역 - 양재역 - 매봉역
   - 신분당선: 강남역 - 양재역 - 양재시민의숲역
 ```
  
### 지하철 역 (Station)
- [x] 지하철 역을 생성할 수 있다.
    - 지하철 역 생성 시 이름을 입력받는다. 
    - 예외 처리
        - [x] 지하철 역 이름은 2글자 이상이어야 한다.

### 지하철 역 저장소(StationRepository)
- [x] 지하철 역 저장소에 지하철 역을 등록할 수 있다.
    - 예외 처리
        - [x] 중복된 지하철 역 이름이 등록될 수 없다.
- [x] 지하철 역 저장소에서 지하철 역을 삭제할 수 있다. 
    - 예외 처리
        - [x] 노선에 등록된 역은 삭제할 수 없다.
- [x] 지하철 역 저장소에 존재하는 지하철 역을 이름으로 조회할 수 있다.
    - 예외 처리
        - [x] 등록되지 않은 지하철 역은 조회할 수 없다.
- [x] 지하철 역 저장소에 존재하는 지하철 역의 목록을 조회할 수 있다.

### 지하철 노선 (Line)
- [x] 지하철 노선을 생성할 수 있다.
    - [x] 노선 생성 시 이름, 상행 종점역, 하행 종점역을 입력받는다. 
    - 예외 처리
        - [x] 지하철 노선 이름은 2글자 이상이어야 한다.
        - [x] 상행 종점역과 하행 종점역이 같을 수는 없다.
- [x] 지하철 노선에 구간을 추가한다.
    - 역과 역사이를 구간이라 하고 이 구간들의 모음이 노선이다.
    - 하나의 역은 여러개의 노선에 추가될 수 있다.
    - 역과 역 사이에 새로운 역이 추가 될 수 있다.
    - 노선에서 갈래길은 생길 수 없다.
- [x] 노선에 등록된 역을 제거할 수 있다.

### 지하철 노선 저장소 (LineRepository)
- [x] 지하철 노선 저장소에 지하철 노선을 등록할 수 있다.
    - 예외 처리
        - [x] 중복된 지하철 노선 이름이 등록될 수 없다.
- [x] 지하철 노선 저장소에서 지하철 노선을 삭제할 수 있다.
- [x] 지하철 노선 저장소에서 지하철 노선의 목록을 조회할 수 있다.
- [x] 지하철 노선 저장소에서 지하철 노선에 구간을 추가할 수 있다.
    - [x] 해당 노선에 이미 존재하는 지하철 역은 추가할 수 없다.
    - [x] 추가하고자 하는 위치는 숫자만 입력 가능하다.
    - [x] 노선의 길이 범위를 벗어나는 위치에는 구간을 추가할 수 없다.
- [x] 지하철 노선 저장소에서 노선에 등록된 역을 제거할 수 있다.
    - 종점을 제거할 경우 다음 역이 종점이 된다.
    - 예외 처리
        - [x] 노선에 포함된 역이 두개 이하일 때는 역을 제거할 수 없다. 
- [x] 지하철 노선 저장소에 존재하는 지하철 노선을 이름으로 조회할 수 있다.
    - [x] 등록되지 않은 지하철 노선은 조회할 수 없다.

### 지하철 노선에 등록된 역 조회 기능
- [x] 노선의 상행 종점부터 하행 종점까지 연결된 순서대로 역 목록을 조회할 수 있다.


## 🤔 생각해보기
#### 출력해야하는 부분이 생각보다 복잡하다..

화면에 보여지는 부분들을 각각 스크린이라고 할 때, 스크린을 이동해야 하는 순간은 아래와 같다. 
- 관리 화면에서 작업을 한 뒤에는 메인 화면으로 가야한다.
- 원하는 기능을 선택할 때 예외가 발생하면 다시 원하는 기능을 선택할 수 있어야 한다.
- 관리 화면에서 작업 도중 예외가 발생하면 관리 화면으로 돌아가야 한다.

어떻게 할 지 고민한 결과... 우선 화면에 변화에 따른 이동은 스택을 사용하는 것이 가장 좋은 방법이라고 생각했다. 구현한 방법은 아래와 같다.
- 출력 화면에 나타날 수 있는 스크린 클래스를 각각 만든다.
    - 스크린은 자신이 보여주고자 하는 걸 먼저 출력하고 자신의 로직을 수행한다.
- 현재 메인 카테고리와 관리 화면 사용자가 선택한 행위에 따라서 스크린을 맵핑해준다.
- 전역 공간에 존재하는 스택을 만들고 모든 스크린은 여기에서 관리하도록 한다. 
- 화면을 이동할 때는 이동할 스크린을 스택에 push 해주고 이전 스크린으로 가야할 때는 pop 해준다.

그리고 에러가 발생했을 때는 해당 부분마다 지정된 범위 내에서 반복되는 로직을 구현하면 된다.
- while문 안에 try ~ catch 문으로 해당 부분들을 감싸주고 에러가 발생하면 continue해서 처음부터 다시 돌도록 했다.
- 정상적으로 완료되었을 경우에는 break해서 while문을 빠져나간다.
- 위의 로직을 사용해야 하는 부분들이 한 군데가 아니므로 중복 코드를 제거하고 가독성을 높이기 위해 함수형 인터페이스를 적절히 사용하였다. 

#### Repository에 로직이 점점 쌓여간다..
기능들을 구현하다보니 Repository에 모든 로직을 작성하고 있는 나를 발견했다. Repository가 하는 일이 너무 많기 때문에 Repository는 간단한 CRUD 정도만 내버려두고 나머지 비즈니스 로직들은 Service 클래스 내로 이동했다. 

#### 역, 노선, 구간의 관리 화면 내 목록의 개수가 달라질 수도 있다 ! 그리고 순서를 바꿔달라는 요구사항이 들어올 수도 있다 !
코드 내에서 if문을 사용해서 위의 문제 상황을 해결하게 되면 코드의 변화가 수없이 일어나야할 것이다. 그래서 각 메인 카테고리마다 관리 목록을 리스트로 관리해서 코드의 변화없이 자연스럽게 확장, 수정이 가능하도록 했다.